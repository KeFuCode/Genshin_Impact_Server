Genshin_Impact_Server
# 基础模块
## 0 文件结构
1. bin 文件夹
   - csvs 文件夹：放入配置表
   - 编译后的执行文件
2. go.mod
   包依赖管理
3. main.go
   程序的入口

## 1 基础模块
玩家从客户端登陆后，首先拿到的就是基础信息。
这个模块对应数据库中的一张表

UID 对每个玩家是唯一确定的

基础模块内容：
1. UID
2. 头像，名片
3. 签名
4. 名字
5. 冒险等级 冒险阅读
6. 世界等级 冷却时间：时间用 int64 存储
7. 生日
8. 展示阵容 展示名片

> 隐藏内容
1. 账号状态：使用 int 保存（不用 bool ），方便后续扩展。 
2. 管理员状态

## 2 模块关系
Player 作为最上层模块，接收到 Client 发送的消息后，调用 ModPlayer 内置方法。

## 3 名字验证
描述：名字验证
1. 英文名：字符格式多样，一般不做处理。
2. 中文名：违规中文名组合多种多样，防不胜防。直接写验证条件，无法穷尽，对服务器要求高。
   - 做法1：调用 HTTP 地址接口，进行外部验证。
     - 优点：对服务器压力小。
     - 缺点： 依赖外部验证服务器的安全性、稳定性。
   - 做法2（常用）：设置违禁词库，并提供更新方法。

例子：ManageBanWord 名字验证

描述：管理类与玩家类区别
玩家连接客户端之后，玩家线程被动创建。公共管理类，需要 server 启动后主动创建。
例子：单例模式实现管理类 管理类与玩家类区别

## 4 定时器功能
增加一个定时器，实现扩充禁用词。

描述：定时器作用
定时器给行为赋予了时间维度，每隔相同时间，就会触发一次行为。
例子：Run() 定时器作用
```go
func (self *ManageBanWord) Run() {
	triker := time.NewTicker(time.Second * 1)
	for {
		select {
		case <-triker.C:
			fmt.Println(time.Now().Unix())
		}
	}
}
```

## 5 启动协议 
将定时器 Run() 以协程 `go Run()` 的形式启动，可以不干扰主程序的运行。
否则程序会从 Run() 进入死循环，无法进入主程序后续逻辑。

## 6 配置基础词库  
一般策划将 EXCEL 表提交给程序，程序将 EXCEL 表转换为 CSV/Json 格式的内容。
Json 格式更像一个 map ，CSV 格式更像数组。两者可以互相转化，关键取决于服务器内部使用什么数据结构。

配置文件会在程序运行之后，初始化至内存中。init() 函数在初次调用 package 是，会自动执行。

## 7 人物等级和经验
utils 中放入处理原始数据的脚本代码，方便将 CSV 文件载入内存。